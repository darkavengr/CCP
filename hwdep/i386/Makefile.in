ASM=nasm
CC=@arch@-elf-gcc
LD=@arch@-elf-gcc
FLAGS = -c -w -ffreestanding -nostdlib -lgcc 
ASMFLAGS = -felf32

all: ../../obj/@arch@/ex.o ../../obj/@arch@/partition.o ../../obj/@arch@/port.o ../../obj/@arch@/sched.o ../../obj/@arch@/mutex.o ../../obj/@arch@/aainit.o ../../obj/@arch@/yield.o  ../../obj/@arch@/CCPLOAD.SYS ../../obj/@arch@/boot
../../obj/@arch@/ex.o:
		$(CC) $(FLAGS) ex.c -o ../../obj/@arch@/ex.o

../../obj/@arch@/partition.o:
		$(CC) $(FLAGS) partition.c -o ../../obj/@arch@/partition.o

../../obj/@arch@/port.o:
		$(CC) $(FLAGS) port.c -o ../../obj/@arch@/port.o

../../obj/@arch@/sched.o:
		$(ASM) $(ASMFLAGS) sched.asm -o ../../obj/@arch@/sched.o

../../obj/@arch@/mutex.o:
		$(CC) $(FLAGS) mutex.c -o ../../obj/@arch@/mutex.o

../../obj/@arch@/aainit.o:
		$(ASM) $(ASMFLAGS) init.asm -o ../../obj/@arch@/aainit.o

../../obj/@arch@/yield.o:
		$(ASM) $(ASMFLAGS) yield.asm -o ../../obj/@arch@/yield.o

../../obj/@arch@/CCPLOAD.SYS:
		$(ASM) ccpload.asm -o ../../bin/@arch@/CCPLOAD.SYS

../../obj/@arch@/boot:
		$(ASM) boot.asm -o ../../bin/@arch@/boot


ASM=@asm@
CC=@cc@
LD=@ld@
CCFLAGS=-c -w -ffreestanding -g -lgcc -Wl,-Map -Wl,../command.map -I@buildroot@/kernel/memorymanager -I@buildroot@/kernel/devicemanager -I @buildroot@/kernel/filemanager -I@buildroot@/kernel/processmanager -I@buildroot@/header
LDFLAGS=-ffreestanding -nostdlib -T ld.script.command  -Wl,-Map -Wl,../command.map
OBJFILES=@buildroot@/obj/@arch@/string.o @buildroot@/obj/@arch@/error.o addvar.o command.o copyfile.o err.o getfullpath.o kprintf.o readline.o runcommand.o call.o
OUTFILE=@buildroot@/bin/@arch@/COMMAND.RUN 

all: 	$(OBJFILES)
	$(CC) -o $(OUTFILE) $(OBJFILES) $(LDFLAGS)

addvar.o:
	$(CC) $(CCFLAGS) addvar.c

command.o:
	$(CC) $(CCFLAGS) command.c

copyfile.o:
	$(CC) $(CCFLAGS) copyfile.c

err.o:
	$(CC) $(CCFLAGS) err.c

getfullpath.o:
	$(CC) $(CCFLAGS) getfullpath.c

kprintf.o:
	$(CC) $(CCFLAGS) kprintf.c

readline.o:
	$(CC) $(CCFLAGS) readline.c

runcommand.o:
	$(CC) $(CCFLAGS) runcommand.c

@buildroot@/obj/@arch@/string.o:
	$(CC) $(CCFLAGS) @buildroot@/header/string.c

@buildroot@/obj/@arch@/error.o:
	$(CC) $(CCFLAGS) @buildroot@/header/error.c

call.o:
	$(ASM) @asm_opts@ @arch@/call.asm -o call.o

